# Aeon

[![Github All Releases](https://img.shields.io/github/downloads/aeonix/aeon/total.svg)](../../releases)
[![GitHub release](https://img.shields.io/github/release/aeonix/aeon/all.svg)](../../releases/latest)
[![GitHub Release Date](https://img.shields.io/github/release-date-pre/aeonix/aeon.svg)](../../releases/latest)
[![GitHub top language](https://img.shields.io/github/languages/top/aeonix/aeon.svg)](../../)
[![GitHub language count](https://img.shields.io/github/languages/count/aeonix/aeon.svg)](../../)
[![GitHub repo size in bytes](https://img.shields.io/github/repo-size/aeonix/aeon.svg)](../../)

[![GitHub last commit](https://img.shields.io/github/last-commit/aeonix/aeon.svg)](../../)
[![Github commits (since latest release)](https://img.shields.io/github/commits-since/aeonix/aeon/latest.svg)](../../)
[![GitHub stars](https://img.shields.io/github/stars/aeonix/aeon.svg)](../../stargazers)
[![GitHub forks](https://img.shields.io/github/forks/aeonix/aeon.svg)](../../network)
[![GitHub issues](https://img.shields.io/github/issues/aeonix/aeon.svg)](../../issues)
[![GitHub closed issues](https://img.shields.io/github/issues-closed/aeonix/aeon.svg)](../../issues)

Copyright (c) 2014-2019, AEON, The Monero Project.   
Portions Copyright (c) 2012-2013 The Cryptonote developers.

## Recursos de Desarrolo

- Web: [aeon.cash](https://aeon.cash)
- Bitcointalk: https://bitcointalk.org/index.php?topic=641696.0
- Reddit: https://www.reddit.com/r/Aeon
- GitHub: [https://github.com/aeonix/aeon](https://github.com/aeonix/aeon)
- IRC: [#aeon on Freenode](https://webchat.freenode.net/?randomnick=1&channels=%23aeon&prompt=1&uio=d4)
- Discord: https://discord.gg/TM8mEsx

## Respuesta de Vulnerabilidad

- La respuesta a la vulnerrabilidad debe ser redirigida a Monero porque gran parte del terreno técnico de Aeon se comparte
- Nuestro [Proceso de Respuesta de Vulnerabilidad](https://github.com/monero-project/meta/blob/master/VULNERABILITY_RESPONSE_PROCESS.md) fomenta la divulgación responsablemente
- También estamos disponibles a través de [HackerOne](https://hackerone.com/monero)

## Anuncios

- Puede suscribirse a una [lista de anuncios](https://docs.google.com/forms/d/e/1FAIpQLSci2UitA67N0W_xgSPLlGj6acGnTOtTdDR_ODZwXTHXZsWnCQ/viewform) para obtener anuncios críticos del equipo central de Aeon. La lista de anuncios puede ser muy útil para saber cuándo se necesitan actualizaciones de software.

## Cobertura

| Type      | Status |
|-----------|--------|
| License   | [![License](https://img.shields.io/badge/license-BSD3-blue.svg)](https://opensource.org/licenses/BSD-3-Clause)

## Introducción

Aeon es una moneda digital privada, segura, imposible de rastrear y descentralizada. Usted es su banco, controla sus fondos y nadie puede rastrear sus transferencias a menos que usted lo permita.

**Privacidad:** Aeon utiliza un sistema criptográficamente sólido que le permite enviar y recibir fondos sin que sus transacciones se revelen fácilmente en la cadena de bloques (el libro mayor de transacciones que todos tienen). Esto garantiza que sus compras, recibos y todas las transferencias permanezcan absolutamente privadas de forma predeterminada.

**Seguridad:** Usando el poder de una red de consenso de persona-a-persona distribuida, cada transacción en la red está protegida criptográficamente. Las billeteras individuales tienen una semilla mnemotécnica de 25 palabras que solo se muestra una vez, y se pueden escribir para respaldar la billetera. Los archivos de la cartera se cifran con una frase de contraseña para garantizar que son inútiles en caso de robo.

**Intrazabilidad:** Al tomar ventaja de las firmas de anillo, una propiedad especial de cierto tipo de criptografía, Aeon puede garantizar que las transacciones no solo sean imposibles de rastrear, sino que tengan una medida de ambigüedad opcional que garantiza que las transacciones no se puedan vincular a un usuario individual o computadora.

## About this project

Esta es la implementación central de Aeon. Es de código abierto y de uso completamente gratuito y sin restricciones, excepto las que se especifican en el acuerdo de licencia a continuación. No hay restricciones para que nadie cree una implementación alternativa del protocolo y la red de manera compatible.

Al igual que con muchos proyectos de desarrollo, el repositorio en Github se considera el área de "preparación" para los últimos cambios. Antes de implementar los cambios en esa rama en el repositorio principal, los desarrolladores individuales los prueban en sus propias sucursales, se envían como una solicitud de extracción y luego son evaluados por los colaboradores que se centran en las pruebas y revisiones de código. Dicho esto, el repositorio se debe considerar cuidadosamente antes de usarlo en un entorno de producción, a menos que haya un parche en el repositorio para un problema particular de detención del sistema que esté experimentando. En general, es una mejor idea utilizar una versión etiquetada para la estabilidad.

**¡Cualquier persona puede contribuir al código de Aeon!** Si tiene una corrección o cambio de código, siéntase libre de enviarlo como una solicitud de extracción directamente a la rama "master". En los casos en que el cambio es relativamente pequeño y no afecta a otra porciones del código, puede ser implementado immediatamenta por unos de los colaboradores. Por otro lado, si el cambio es particularmente grande o complejo, se espera que se discuta en detalle mucho antes de que se envíe la solicitud de extracción, o incluso directamente en la solicitud de extracción.

## Apoyando el Proyecto

Aeon es una empresa 100% patrocinada por la comunidad. Si desea sumarse a nuestros esfuerzos, lo más fácil que puede hacer es respaldar financieramente el proyecto. Se pueden hacer donaciones de Aeon y de Bitcoin a **donate.aeon.cash** si se usa un cliente que admite el [OpenAlias](https://openalias.org) estándar.

La dirección de donación de Aeon es: `WmsSWgtT1JPg5e3cK41hKXSHVpKW7e47bjgiKmWZkYrhSS5LhRemNyqayaSBtAQ6517eo5PtH9wxHVmM78JDZSUu2W8PqRiNs` (viewkey: `71bf19a7348ede17fa487167710dac401ef1556851bfd36b76040facf051630b`)

La dirección de la donación de Bitcoin es: `12Cyjf3qV6qLyXdzpLSLPdRFPUVidvnzFM`

Los patrocinadores también brindan gentilmente la financiación del desarrollo de GUI y / o algunos servicios de apoyo:

[<img width="80" src="https://static.getmonero.org/images/sponsors/mymonero.png"/>](https://mymonero.com)
[<img width="150" src="https://static.getmonero.org/images/sponsors/kitware.png?1"/>](https://kitware.com)
[<img width="100" src="https://static.getmonero.org/images/sponsors/dome9.png"/>](https://dome9.com)
[<img width="150" src="https://static.getmonero.org/images/sponsors/araxis.png"/>](https://araxis.com)
[<img width="150" src="https://static.getmonero.org/images/sponsors/jetbrains.png"/>](https://www.jetbrains.com/)
[<img width="150" src="https://static.getmonero.org/images/sponsors/navicat.png"/>](https://www.navicat.com/)
[<img width="150" src="https://static.getmonero.org/images/sponsors/symas.png"/>](https://www.symas.com/)

También hay varios grupos mineros que donan amablemente una parte de sus tarifas, [se puede encontrar una lista de ellos en nuestra publicación de Bitcointalk](https://bitcointalk.org/index.php?topic=641696.0).

## Licencia

Vea [Licencia](Licencia).

## Contribuyendo

Si desea ayudar, vea [CONTRIBUYENDO](CONTRIBUTING.spanish.md) para un conjunto de directrices.

## Actualización de Software

Aeon utiliza un mecanismo de actualización de software (hard fork) para implementar nuevas funciones. Esto significa que los usuarios de Aeon (usuarios finales y proveedores de servicios) deben ejecutar las versiones actuales y actualizar su software según sea necesario. **A diferencia de Monero, no hay un horario fijo para los 'hard forks', y el horario para el próximo 'fork' se determinará orgánicamente a través de la discusión comunitaria.** 
El software requerido para estas actualizaciones estará disponible antes de la fecha programada. Verifique el repositorio antes de esta fecha para obtener la versión de software Aeon adecuada. A continuación se muestra el cronograma histórico y el cronograma proyectado para la próxima actualización.
Las fechas se proporcionan en el formato YYYY-MM-DD.


| Actualización de software de altura de bloque | Fecha       | Fork versión | Versión mínima Aeon | Versión Aeon recomendada | Detalles                                                                            |  
| ---------------------------------------------- | -----------| ----------------- | ---------------------- | -------------------------- | ---------------------------------------------------------------------------------- |
| 592000                        | 2015-08-04 | v1 (exceptional, version not bumped)      | v0.9.0.0                 | v0.9.14.0                     | blocktime = 240 seconds, CryptoNight-Lite, lower mining priority for ringsize < 3       |
| 963500                        | 2018-06-03 | v7                | v0.12.0.0                 | v0.12.8.0-aeon                    | Rebase to Monero's latest codebase with RingCT disabled, CryptoNight-Lite variant 1, limited use of ringsize 1, ban ringsize 2   |

## Compilando Aeon desde el codigo

### Dependencias

La siguiente tabla resume las herramientas y bibliotecas necesarias para construir. 
Algunas de las bibliotecas también están incluidas en este repositorio. (marcado como
"Vendored"). Por defecto, la compilación usa la biblioteca instalada en el sistema,
e ignora los repositos de los "Vendored". Sin embargo, si no se encuentra ninguna biblioteca 
instalada en el sistema, entonces se construirá y utilizará los repositos de los "Vendored".
Los repositos de los "Vendored" también se usan para construcciones vinculadas estáticamente porque 
la distribución los paquetes a menudo incluyen solo binarios de bibliotecas compartidas (`.so`) 
pero no archivos de biblioteca estáticos (`.a`).

| Dep          | Min. version  | Vendored | Debian/Ubuntu pkg  | Arch pkg     | Fedora            | Optional | Purpose        |
| ------------ | ------------- | -------- | ------------------ | ------------ | ----------------- | -------- | -------------- |
| GCC          | 4.7.3         | NO       | `build-essential`  | `base-devel` | `gcc`             | NO       |                |
| CMake        | 3.5           | NO       | `cmake`            | `cmake`      | `cmake`           | NO       |                |
| pkg-config   | any           | NO       | `pkg-config`       | `base-devel` | `pkgconf`         | NO       |                |
| Boost        | 1.58          | NO       | `libboost-all-dev` | `boost`      | `boost-devel`     | NO       | C++ libraries  |
| OpenSSL      | basically any | NO       | `libssl-dev`       | `openssl`    | `openssl-devel`   | NO       | sha256 sum     |
| libzmq       | 3.0.0         | NO       | `libzmq3-dev`      | `zeromq`     | `cppzmq-devel`    | NO       | ZeroMQ library |
| OpenPGM      | ?             | NO       | `libpgm-dev`       | `libpgm`     | `openpgm-devel`   | NO       | For ZeroMQ     |
| libnorm[2]   | ?             | NO       | `libnorm-dev`      |              |               `   | YES      | For ZeroMQ     |
| libunbound   | 1.4.16        | YES      | `libunbound-dev`   | `unbound`    | `unbound-devel`   | NO       | DNS resolver   |
| libsodium    | ?             | NO       | `libsodium-dev`    | `libsodium`  | `libsodium-devel` | NO       | cryptography   |
| libunwind    | any           | NO       | `libunwind8-dev`   | `libunwind`  | `libunwind-devel` | YES      | Stack traces   |
| liblzma      | any           | NO       | `liblzma-dev`      | `xz`         | `xz-devel`        | YES      | For libunwind  |
| libreadline  | 6.3.0         | NO       | `libreadline6-dev` | `readline`   | `readline-devel`  | YES      | Input editing  |
| ldns         | 1.6.17        | NO       | `libldns-dev`      | `ldns`       | `ldns-devel`      | YES      | SSL toolkit    |
| expat        | 1.1           | NO       | `libexpat1-dev`    | `expat`      | `expat-devel`     | YES      | XML parsing    |
| GTest        | 1.5           | YES      | `libgtest-dev`[1]  | `gtest`      | `gtest-devel`     | YES      | Test suite     |
| Doxygen      | any           | NO       | `doxygen`          | `doxygen`    | `doxygen`         | YES      | Documentation  |
| Graphviz     | any           | NO       | `graphviz`         | `graphviz`   | `graphviz`        | YES      | Documentation  |
| pcsclite     | ?             | NO       | `libpcsclite-dev`  | ?            | `pcsc-lite pcsc-lite-devel` | NO | Ledger     |          


[1] Para Debian/Ubuntu `libgtest-dev` solo incluye sources and headers. Debes 
construir el binario de la biblioteca manualmente. Esto se puede hacer con el siguiente comando ```sudo apt-get install libgtest-dev && cd /usr/src/gtest && sudo cmake . && sudo make && sudo mv libg* /usr/lib/ ```
[2] libnorm-dev es necesario si su biblioteca zmq fue construida con libnorm, y de lo contrario no será necesaria

Instale todas las dependencias a la vez en Debian / Ubuntu:
``` sudo apt update && sudo apt install build-essential cmake git pkg-config libboost-all-dev libssl-dev libzmq3-dev libunbound-dev libsodium-dev libunwind8-dev liblzma-dev libreadline6-dev libldns-dev libexpat1-dev doxygen graphviz libpcsclite-dev libpgm-dev```
### Clonando el Repositorio

Clonar de forma recursiva para tambien clonar submódulo(s) necesarios:

`$ git clone --recursive https://github.com/aeonix/aeon`

Si ya tiene un repositorio clonado, inicialice y actualice:

`$ cd aeon && git submodule init && git submodule update`

### Instrucciones de Construcción

Aeon usa el sistema de compilación CMake y un [Makefile] de alto nivel (Makefile) que
invoca los comandos cmake según sea necesario.

#### En Linux y OS X

* Instala las dependencias
* Cambie a la raíz del directorio del código, y cambie a la etiqueta de lanzamiento más reciente y compile:

        cd aeon
        git checkout v0.12.8.0-aeon
        make

    *Opcional*: Si su máquina tiene varios núcleos y suficiente memoria, habilite
    construcción paralela ejecutando `make -j<number of threads>` en lugar de `make`.  
    Para que valga la pena, la máquina debe tener un núcleo y aproximadamente 2 GB de RAM.
    disponible por thread.

    *Nota*: Si cmake no puedo encontrar zmq.hpp en OS X, instalación `zmq.hpp` 
    from https://github.com/zeromq/cppzmq en la carpeta `/usr/local/include` debería arreglar ese error.
    
    *Nota*: Las instrucciones anteriores compilarán la versión más estable del
    Aeon software. Si desea utilizar y probar el software más reciente,
    utilizar ```git checkout master```. La rama 'master' puede contener actualizaciones que son
    tanto inestable como incompatible con el software de lanzamiento, aunque las pruebas siempre son
    alentado. 

* El ejecutable se puede encontrar en la carpeta `build/release/bin`.

* Agrega `PATH="$PATH:$HOME/aeon/build/release/bin"` a `.profile`

* Corre Aeon con `aeond --detach`

* **Opcional**: construir y ejecutar el conjunto de pruebas para verificar los binarios:

        make release-test

    *NOTA*: `core_tests` la prueba puede tardar unas horas en completarse.

* **Opcional**: para construir binarios adecuados para la depuración:

         make debug

* **Opcional**: para construir binarios enlazados estáticamente:

         make release-static

Las dependencias deben construirse con -fPIC. Las bibliotecas estáticas generalmente no lo son, por lo que es posible que tenga que compilarlas usted mismo con -fPIC. Consulte su documentación para saber cómo construirlos.

* **Opcional**: construir documentación en `doc/html` (omit `HAVE_DOT=YES` if `graphviz` is not installed):

        HAVE_DOT=YES doxygen Doxyfile

#### En el Raspberry Pi

Probado en una Raspberry Pi Zero con una instalación limpia de Raspbian Stretch mínimo (2017-09-07 o posterior) de https://www.raspberrypi.org/downloads/raspbian/. Si está utilizando Raspian Jessie, [consulte la nota en la siguiente sección](#note-for-raspbian-jessie-users). 

* `apt-get update && apt-get upgrade` para instalar todo el último software

* Instale las dependencias para Aeon de la columna 'Debian' en la tabla de arriba.

* Aumente el swap size del sistema:
```	
	sudo /etc/init.d/dphys-swapfile stop  
	sudo nano /etc/dphys-swapfile  
	CONF_SWAPSIZE=2048
	sudo /etc/init.d/dphys-swapfile start  
```
* Si utiliza un disco duro externo sin una fuente de alimentación de energia externa, asegúrese de que reciba suficiente energía para evitar problemas de hardware al sincronizar, agregando la línea "max_usb_current=1" a /boot/config.txt

* Clone Aeon y compruebe la última versión de lanzamiento:
```
        git clone https://github.com/aeonix/aeon.git
	cd aeon
	git checkout tags/v0.12.8.0-aeon
```
* Construir:
```
        make release
```
* Espere 4-6 horas

* El ejecutable se puede encontrar en la carpeta `build/release/bin`.

* Agrega `PATH="$PATH:$HOME/aeon/build/release/bin"` a `.profile`

* Corre Aeon con `aeond --detach`

* Es posible que desee reducir el 'swap file' una vez finalizada la compilación y eliminar el directorio boost de su directorio de inicio

#### *Nota para los usuarios de Raspbian Jessie:*

Si está utilizando la imagen anterior de Raspbian Jessie, compilar Aeon es un poco más complicado. La versión de Boost disponible en los repositorios Jessie de Debian es demasiado antigua para usarla con Aeon, por lo que debe compilar una versión más nueva usted mismo. A continuación se explican los pasos adicionales y se ha probado en una Raspberry Pi 2 con una instalación limpia de un Raspbian Jessie mínimo.

* Como antes, `apt-get update && apt-get upgrade` para instalar todo el software más reciente y aumentar el 'swap size/file'

```	
	sudo /etc/init.d/dphys-swapfile stop  
	sudo nano /etc/dphys-swapfile  
	CONF_SWAPSIZE=2048  
	sudo /etc/init.d/dphys-swapfile start  
```

* Luego, instale las dependencias para Aeon excepto `libunwind` y `libboost-all-dev`

* Instale la última versión de boost (esto puede requerir primero invocar `apt-get remove --purge libboost*` para eliminar una versión anterior si no está utilizando una instalación limpia):
```
	cd  
	wget https://sourceforge.net/projects/boost/files/boost/1.64.0/boost_1_64_0.tar.bz2  
	tar xvfo boost_1_64_0.tar.bz2  
	cd boost_1_64_0  
	./bootstrap.sh  
	sudo ./b2  
```
* Espere ~8 horas
```
	sudo ./bjam cxxflags=-fPIC cflags=-fPIC -a install
```
* Espere ~4 horas

* A partir de aquí, siga las [instrucciones generales de Raspberry Pi](#on-the-raspberry-pi) desde el paso "Clone Aeon y checkout más reciente versión de lanzamiento".

#### En Windows:

Los binarios para Windows se crean en Windows usando la cadena de herramientas MinGW dentro de
[MSYS2 environment](https://www.msys2.org). El entorno MSYS2 emula un
Sistema POSIX. La cadena de herramientas se ejecuta dentro del entorno y *se compila cruzadamente*
binarios que pueden ejecutarse fuera del entorno como un Windows normal
solicitud.

**Preparando el entorno de construcción**

* Descargue e instale el [MSYS2 installer](https://www.msys2.org), ya sea el paquete de 64 bits o el de 32 bits, dependiendo de su sistema.
* Abra el shell de MSYS a través del acceso directo `MSYS2 Shell`
* Actualizar paquetes usando pacman: 

        pacman -Syu  

* Salga del shell de MSYS usando Alt + F4 
* Editar las propiedades de la`MSYS2 Shell` shortcut cambiando "msys2_shell.bat" a "msys2_shell.cmd -mingw64" para compilaciones de 64 bits o "msys2_shell.cmd -mingw32" para compilaciones de 32 bits
* Reinicie el shell de MSYS a través de un atajo modificado y actualice los paquetes nuevamente usando pacman: 

        pacman -Syu  


* Instalar dependencias:

    Para construir para Windows de 64 bits:

        pacman -S mingw-w64-x86_64-toolchain make mingw-w64-x86_64-cmake mingw-w64-x86_64-boost mingw-w64-x86_64-openssl mingw-w64-x86_64-zeromq mingw-w64-x86_64-libsodium

    Para construir para Windows de 32 bits:
 
        pacman -S mingw-w64-i686-toolchain make mingw-w64-i686-cmake mingw-w64-i686-boost mingw-w64-i686-openssl mingw-w64-i686-zeromq mingw-w64-i686-libsodium

* Abra el shell MingW a través del acceso directo `MinGW-w64-Win64 Shell` en Windows de 64 bits
  o el método abreviado `MinGW-w32-Win32 Shell` en Windows de 32 bits. Nota que si eres
  ejecutando Windows de 64 bits, tendrá dos MinGW de 64 bits y de 32 bits.

**Clonación**

* Para clonar, ejecute:

        git clone --recursive https://github.com/aeonix/aeon.git

**Construir**

* Cambie al directorio clonado, ejecute:
	
        cd aeon

* Si desea una específica [version/tag](https://github.com/aeonix/aeon/tags), ejecute a 'git checkout' para esa versión. eg. 'v0.12.8.0-aeon'. Si no te importa la versión y solo quieres binarios del master, omite este paso:
	
        git checkout v0.12.8.0-aeon

* Si está en un sistema de 64 bits, ejecute:

        make release-static-win64

* Si está en un sistema de 32 bits, ejecute:

        make release-static-win32

* El ejecutable se puede encontrar en la carpeta `build/release/bin`.

* **Opcional**: para crear binarios de Windows adecuados para la depuración en un sistema de 64 bits, ejecute:

        make debug-static-win64
	
* **Opcional**: para crear binarios de Windows adecuados para la depuración en un sistema de 32 bits, ejecute:

        make debug-static-win32

* El ejecutable se puede encontrar en la carpeta `build/debug/bin`.

### En FreeBSD:

El proyecto se puede construir desde cero siguiendo las instrucciones para Linux arriba. Si está ejecutando Aeon en una cárcel, debe agregar la bandera: `allow.sysvipc=1` a su configuración de la cárcel, de lo contrario lmdb mostrará el mensaje de error: `Failed to open lmdb environment: Function not implemented`.

Esperamos agregar Aeon en el árbol de puertos en un futuro próximo, lo que ayudará a administrar las instalaciones utilizando puertos o paquetes.

### En OpenBSD:

#### OpenBSD < 6.2

Esto ha sido probado en OpenBSD 5.8

Tendras que agregar algunos paquetes a su sistema. `pkg_add db cmake gcc gcc-libs g++ gtest`.

Los paquetes doxygen y graphviz son opcionales y requieren el conjunto xbase.

El paquete Boost tiene un error que evitará que librpc.a se compile correctamente. Para solucionar esto, tendrás que construir Boost desde cero. Siga las instrucciones aquí (under "Building Boost"):
https://github.com/bitcoin/bitcoin/blob/master/doc/build-openbsd.md

Tendrá que agregar los módulos de serialización, fecha y hora y expresiones regulares a Boost cuando cree los que Aeon necesita.

Para construir: `env CC=egcc CXX=eg++ CPP=ecpp DEVELOPER_LOCAL_TOOLS=1 BOOST_ROOT=/path/to/the/boost/you/built make release-static-64`

#### OpenBSD >= 6.2

Tendras que agregar algunos paquetes a su sistema. `pkg_add cmake zeromq libiconv`.

Los paquetes doxygen y graphviz son opcionales y requieren el conjunto xbase.


Construye la librería Boost usando clang. Esta guía se deriva de: https://github.com/bitcoin/bitcoin/blob/master/doc/build-openbsd.md

Asumimos que está compilando con un usuario no root y que tiene habilitado `doas`.

Nota: No use el paquete boost provisto por OpenBSD, ya que estamos instalando boost a `/usr/local`.

```
# Crear directorio de construcción de Boost
mkdir ~/boost
cd ~/boost

# Obtenga codigo de boost 
ftp -o boost_1_64_0.tar.bz2 https://netcologne.dl.sourceforge.net/project/boost/boost/1.64.0/boost_1_64_0.tar.bz2 

# DEBE salir: (SHA256) boost_1_64_0.tar.bz2: OK
echo "7bcc5caace97baa948931d712ea5f37038dbb1c5d89b43ad4def4ed7cb683332 boost_1_64_0.tar.bz2" | sha256 -c
tar xfj boost_1_64_0.tar.bz2

# Obtenga y aplique parches de refuerzo, necesarios para OpenBSD
ftp -o boost_test_impl_execution_monitor_ipp.patch https://raw.githubusercontent.com/openbsd/ports/bee9e6df517077a7269ff0dfd57995f5c6a10379/devel/boost/patches/patch-boost_test_impl_execution_monitor_ipp
ftp -o boost_config_platform_bsd_hpp.patch https://raw.githubusercontent.com/openbsd/ports/90658284fb786f5a60dd9d6e8d14500c167bdaa0/devel/boost/patches/patch-boost_config_platform_bsd_hpp

# DEBE salir: (SHA256) boost_config_platform_bsd_hpp.patch: OK
echo "1f5e59d1154f16ee1e0cc169395f30d5e7d22a5bd9f86358f738b0ccaea5e51d boost_config_platform_bsd_hpp.patch" | sha256 -c
# DEBE salir: (SHA256) boost_test_impl_execution_monitor_ipp.patch: OK
echo "30cec182a1437d40c3e0bd9a866ab5ddc1400a56185b7e671bb3782634ed0206 boost_test_impl_execution_monitor_ipp.patch" | sha256 -c

cd boost_1_64_0
patch -p0 < ../boost_test_impl_execution_monitor_ipp.patch
patch -p0 < ../boost_config_platform_bsd_hpp.patch

# Empezar a construir boost
echo 'using clang : : c++ : <cxxflags>"-fvisibility=hidden -fPIC" <linkflags>"" <archiver>"ar" <striper>"strip"  <ranlib>"ranlib" <rc>"" : ;' > user-config.jam
./bootstrap.sh --without-icu --with-libraries=chrono,filesystem,program_options,system,thread,test,date_time,regex,serialization,locale --with-toolset=clang
./b2 toolset=clang cxxflags="-stdlib=libc++" linkflags="-stdlib=libc++" -sICONV_PATH=/usr/local
doas ./b2 -d0 runtime-link=shared threadapi=pthread threading=multi link=static variant=release --layout=tagged --build-type=complete --user-config=user-config.jam -sNO_BZIP2=1 -sICONV_PATH=/usr/local --prefix=/usr/local install
```

Construir cppzmq

Construir the cppzmq bindings.

Asumimos que está compilando con un usuario no root y que tiene habilitado `doas`.

```
# Crear directorio cppzmq 
mkdir ~/cppzmq
cd ~/cppzmq

# Obtenga codigo de cppzmq
ftp -o cppzmq-4.2.3.tar.gz https://github.com/zeromq/cppzmq/archive/v4.2.3.tar.gz

# DEBE salir: (SHA256) cppzmq-4.2.3.tar.gz: OK
echo "3e6b57bf49115f4ae893b1ff7848ead7267013087dc7be1ab27636a97144d373 cppzmq-4.2.3.tar.gz" | sha256 -c
tar xfz cppzmq-4.2.3.tar.gz

# Empezar a construir cppzmq
cd cppzmq-4.2.3
mkdir build
cd build
cmake ..
doas make install
```

Construir Aeon: `env DEVELOPER_LOCAL_TOOLS=1 BOOST_ROOT=/usr/local make release-static`

### En Solaris:

El enlazador de Solaris predeterminado no se puede usar, debe instalar GNU ld, luego ejecutar cmake manualmente con la ruta a su copia de GNU ld:

        mkdir -p build/release
        cd build/release
        cmake -DCMAKE_LINKER=/path/to/ld -D CMAKE_BUILD_TYPE=Release ../..
        cd ../..

A continuación, puede ejecutar make como de costumbre.

### En Linux para Android (usando docker):

        # Construir image (for ARM 32-bit)
        docker build -f utils/build_scripts/android32.Dockerfile -t aeon-android .
        # Construir image (for ARM 64-bit)
        docker build -f utils/build_scripts/android64.Dockerfile -t aeon-android .
        # Construir container
        docker create -it --name aeon-android aeon-android bash
        # Obtenga binaries
        docker cp aeon-android:/src/build/release/bin .

### Construcción de binarios portátiles enlazados estáticamente.

De forma predeterminada, en las compilaciones vinculadas dinámica o estáticamente, los binarios se dirigen al procesador host específico en el que se realiza la compilación y no son portátiles a otros procesadores. Los binarios portátiles se pueden construir utilizando los siguientes objetivos:

* ```make release-static-linux-x86_64``` construye binarios en Linux en x86_64 portátil en sistemas POSIX en procesadores x86_64
* ```make release-static-linux-i686``` construye binarios en Linux en x86_64 o i686 portátiles en sistemas POSIX en procesadores i686
* ```make release-static-linux-armv8``` construye binarios en Linux portátil a través de sistemas POSIX en procesadores armv8
* ```make release-static-linux-armv7``` construye binarios en Linux portátil a través de sistemas POSIX en procesadores armv7
* ```make release-static-linux-armv6``` construye binarios en Linux portátil a través de sistemas POSIX en procesadores armv6
* ```make release-static-win64``` construye binarios en Windows de 64 bits portátil en sistemas Windows de 64 bits
* ```make release-static-win32``` construye binarios en Windows de 64 bits o 32 bits portátil en sistemas Windows de 32 bits

## Instalando Aeon desde un paquete

**NEGACIÓN DE RESPONSABILIDAD: estos paquetes no forman parte de este repositorio ni son mantenidos por los colaboradores de este proyecto y, como tales, no pasan por el mismo proceso de revisión para garantizar su confiabilidad y seguridad.**

Paquetes están disponibles para

* (**TODO**) ~Ubuntu y [snap supported](https://snapcraft.io/docs/core/install) sistemas, a través de una comunidad contribuida a construir~

        snap install aeon --beta

~Instalar  Snap es muy rápido. Las instantáneas son seguras. Están aislados con todas sus dependencias. También se actualiza automáticamente cuando se lanza una nueva versión.~

* (**TODO**) ~Arch Linux (via [AUR](https://aur.archlinux.org/)):~
  - ~Stable release: [`aeon`](https://aur.archlinux.org/packages/aeon)~
  - ~Bleeding edge: [`aeon-git`](https://aur.archlinux.org/packages/aeon-git)~

* (**TODO**) ~Void Linux:~

        xbps-install -S aeon

* (**TODO**) ~GuixSD~

        guix package -i aeon

* OS X via [Homebrew](https://brew.sh)

        brew tap sammy007/aeon
        brew install aeon -v

* Docker

        # Construir utilizando todos los núcleos disponibles
        docker build -t aeon .

        # O compilar utilizando un número específico de núcleos (reducir el requisito de RAM)
        docker build --build-arg NPROC=1 -t aeon .
     
        # o bien ejecutar en primer plano
        docker run -it -v /aeon/chain:/root/.aeon -v /aeon/wallet:/wallet -p 11180:11180 aeon

        # Para ejecutar en segundo plano:
        docker run -it -d -v /aeon/chain:/root/.aeon -v /aeon/wallet:/wallet -p 11180:11180 aeon

* La compilación necesita 3 GB de espacio.
* Espera una hora o mas

¡Empaquetar para su distribución favorita sería una contribución bienvenida!

## Corriendo aeond

La construcción coloca el binario en `bin/` subdirectorio dentro del directorio de compilación
desde donde se invocó cmake (raíz del repositorio por defecto). Para correr en
primer plano:

    ./bin/aeond

Para enumerar todas las opciones disponibles, ejecute `./bin/aeond --help`.  Las opciones pueden ser
especificado ya sea en la línea de comando o en un archivo de configuración pasado por el
`--config-file` argumento.  Para especificar una opción en el archivo de configuración, agregue
una línea con la sintaxis `argumentname = value`, donde` argumentname` es el nombre
del argumento sin los guiones iniciales, por ejemplo `log-level = 1`.

Para ejecutar en segundo plano:

    ./bin/aeond --log-file aeond.log --detach

Para ejecutar como un servicio systemd, copia
[aeond.service](utils/systemd/aeond.service) a `/etc/systemd/system/` y
[aeond.conf](utils/conf/aeond.conf) a `/etc/`. El [exampleservice] 
(utils / systemd / aeond.service) asume que el usuario `aeon` existe
y su domicilio es el directorio de datos especificado en el [exampleconfig](utils/conf/aeond.conf).

Si está en Mac, es posible que deba agregar la opción `--max-concurrency 1` a
aeon-wallet-cli, y posiblemente aeond, si te caes refrescando.

## Internacionalización

Vea [README.i18n.md](README.i18n.md).

## Usando Tor

Aunque Aeon no está hecho para integrarse con Tor, puede usarse envuelto con torsocks, por
configurando los siguientes parámetros de configuración y variables de entorno:

* `--p2p-bind-ip 127.0.0.1` en la línea de comando o `p2p-bind-ip=127.0.0.1` en
  aeond.conf para desactivar la escucha de conexiones en interfaces externas.
* `--no-igd` en la línea de comando o `no-igd=1` en aeond.conf deshabilitar IGD
  (Negociación de reenvío de puertos UPnP), que no tiene sentido con Tor.
* `DNS_PUBLIC=tcp` o `DNS_PUBLIC=tcp://x.x.x.x` donde x.x.x.x es la IP de la
  servidor DNS deseado, para que las solicitudes de DNS pasen sobre TCP, de modo que se enruten
  a través de tor. Cuando no se especifica IP, aeond usa la lista predeterminada de
  servidores definidos en[src/common/dns_utils.cpp](src/common/dns_utils.cpp).
* `TORSOCKS_ALLOW_INBOUND=1` para indicar a los torsocks que permitan aeond enlazarse a las interfaces
   para aceptar conexiones de la cartera. En algunos sistemas Linux, torsocks
   permite enlazar a localhost por defecto, por lo que configurar esta variable es solo
   necesario para permitir el enlace a las interfaces LAN / VPN locales para permitir que las billeteras
   conectarse desde hosts remotos. En otros sistemas, puede ser necesario para carteras locales
   también.
* NO pase `--detach` cuando se ejecuta a través de torsocks con systemd, (ver
  [utils/systemd/aeond.service](utils/systemd/aeond.service) para detalles).
* Si usa la billetera con un demonio Tor a través de la IP de bucle invertido (eg, 127.0.0.1:9050),
  use `--untrusted-daemon` a menos que sea tu propio servicio oculto.

Ejemplo de línea de comando para comenzar Aeon través de Tor:

    DNS_PUBLIC=tcp torsocks aeond --p2p-bind-ip 127.0.0.1 --no-igd

### Usando Tor en Tails

TAILS se envía con un conjunto muy restrictivo de reglas de firewall. Por lo tanto, necesitas
agregar una regla para permitir esta conexión también, además de decirle a torsocks que
Permitir conexiones entrantes. Ejemplo completo:

    sudo iptables -I OUTPUT 2 -p tcp -d 127.0.0.1 -m tcp --dport 11181 -j ACCEPT
    DNS_PUBLIC=tcp torsocks ./aeond --p2p-bind-ip 127.0.0.1 --no-igd --rpc-bind-ip 127.0.0.1 \
        --data-dir /home/amnesia/Persistent/your/directory/to/the/blockchain

## Depuración

Esta sección contiene instrucciones generales para la depuración de instalaciones fallidas o problemas encontrados con Aeon. Primero asegúrese de que está ejecutando la última versión creada desde el repositorio de Github.

### Obtención de stack traces y core dumps en sistemas Unix

En general, usamos la herramienta `gdb` (depurador de GNU) para proporcionar la funcionalidad de 'Stack traces', y` ulimit` para proporcionar 'Core dumps' en las compilaciones que fallan o tengan errores.

* Para usar gdb con el fin de obtener un seguimiento de pila para una construcción que se ha estancado:

Ejecutar la construcción.

Una vez que se detenga, ingrese el siguiente comando:

```
gdb /path/to/aeond `pidof aeond` 
```

Escriba  `thread apply all bt` dentro de gdb para obtener el 'Stack trace'

* Sin embargo si el core dumps o segfaults:

Ingrese `ulimit -c unlimited` en la línea de comando para habilitar tamaños de archivo ilimitados para 'core dumps'

Ingrese `echo core | sudo tee /proc/sys/kernel/core_pattern` to stop cores from being hijacked by other tools

Ejecutar la construcción.

Cuando termina con una salida a lo largo de las líneas de "Segmentation fault (core dumped)", debería haber un archivo de core dump en el mismo directorio que aeond. Puede llamarse simplemente `core`, or `core.xxxx` con números adjuntos.

Ahora puedes analizar este core dump con `gdb` como sigue:

`gdb /path/to/aeond /path/to/dumpfile`

Printea el 'stack trace' con `bt`

* Para ejecutar aeond dentro de gdb:

Ingrese `gdb /path/to/aeond`

Pasa las opciones de línea de comandos con `--args` seguido de los argumentos relevantes

Ingrese `run` para ejecutar aeond

### Analizando la corrupción de la memoria

Hay dos herramientas disponibles:

* ASAN

Configure Aeon con el -D SANITIZE=ON cmake flag, eg:

    cd build/debug && cmake -D SANITIZE=ON -D CMAKE_BUILD_TYPE=Debug ../..

A continuación, puede ejecutar las herramientas aeon normalmente. El rendimiento normalmente se reduce a la mitad.

* valgrind

Instala valgrind y ejecutar `valgrind /path/to/aeond`. Va a ser muy lento

### LMDB

Instrucciones para la depuración de la supuesta corrupción de blockchain según @HYC

Hay un `mdb_stat` comando en LMDB que puede imprimir estadísticas sobre la base de datos pero no se construye de forma rutinaria. Esto se puede construir con el siguiente comando:

`cd ~/aeon/external/db_drivers/liblmdb && make`

La salida de `mdb_stat -ea <path to blockchain dir>` indicará inconsistencias en los bloques, block_heights y block_info.

La salida de `mdb_dump -s blocks <path to blockchain dir>` y `mdb_dump -s block_info <path to blockchain dir>` es útil para indicar si los bloques y block_info contienen las mismas claves.

Estos registros se vuelcan como datos hexadecimales, donde la primera línea es la clave y la segunda línea son los datos.
